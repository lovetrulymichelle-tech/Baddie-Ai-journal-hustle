{% extends "base.html" %}

{% block title %}Insights - Baddie AI Journal Hustle{% endblock %}

{% block content %}
<section class="insights-section">
    <div class="page-header">
        <h1>Your Royal Analytics</h1>
        <p>Discover patterns and insights from your journey ✨</p>
    </div>
    
    <!-- Overview Stats -->
    <div class="overview-stats">
        <div class="stat-card card">
            <div class="stat-header">
                <h3>Total Entries</h3>
                <i class="fas fa-book-open"></i>
            </div>
            <div class="stat-value">{{ insights.total_entries }}</div>
            <div class="stat-trend positive">
                <i class="fas fa-arrow-up"></i>
                +5 this week
            </div>
        </div>
        
        <div class="stat-card card">
            <div class="stat-header">
                <h3>Current Streak</h3>
                <i class="fas fa-fire"></i>
            </div>
            <div class="stat-value">{{ insights.current_streak }}</div>
            <div class="stat-trend positive">
                <i class="fas fa-crown"></i>
                Days strong!
            </div>
        </div>
        
        <div class="stat-card card">
            <div class="stat-header">
                <h3>Mood Score</h3>
                <i class="fas fa-heart"></i>
            </div>
            <div class="stat-value">95%</div>
            <div class="stat-trend positive">
                <i class="fas fa-sparkles"></i>
                Excellent vibes
            </div>
        </div>
        
        <div class="stat-card card">
            <div class="stat-header">
                <h3>Growth Level</h3>
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-value">Queen</div>
            <div class="stat-trend positive">
                <i class="fas fa-gem"></i>
                Level up soon!
            </div>
        </div>
    </div>
    
    <!-- Charts Row -->
    <div class="charts-row">
        <!-- Mood Breakdown -->
        <div class="chart-card card">
            <div class="chart-header">
                <h3>
                    <i class="fas fa-smile"></i>
                    Mood Breakdown
                </h3>
                <p>Your emotional journey</p>
            </div>
            <div class="mood-chart">
                {% for mood, count in insights.mood_breakdown.items() %}
                    <div class="mood-item">
                        <div class="mood-info">
                            <span class="mood-name">{{ mood.title() }}</span>
                            <span class="mood-count">{{ count }} entries</span>
                        </div>
                        <div class="mood-bar">
                            <div class="mood-fill mood-{{ mood }}" style="width: {{ (count / insights.total_entries * 100)|round(1) }}%"></div>
                        </div>
                        <span class="mood-percentage">{{ (count / insights.total_entries * 100)|round(1) }}%</span>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Category Distribution -->
        <div class="chart-card card">
            <div class="chart-header">
                <h3>
                    <i class="fas fa-folder"></i>
                    Category Focus
                </h3>
                <p>Where you invest your energy</p>
            </div>
            <div class="category-chart">
                {% for category, count in insights.category_breakdown.items() %}
                    <div class="category-item">
                        <div class="category-icon">
                            {% if category == 'personal' %}
                                <i class="fas fa-user"></i>
                            {% elif category == 'work' %}
                                <i class="fas fa-briefcase"></i>
                            {% else %}
                                <i class="fas fa-circle"></i>
                            {% endif %}
                        </div>
                        <div class="category-info">
                            <span class="category-name">{{ category.title() }}</span>
                            <span class="category-count">{{ count }} entries</span>
                        </div>
                        <div class="category-percentage">
                            {{ (count / insights.total_entries * 100)|round(1) }}%
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- Top Tags -->
    <div class="tags-section">
        <div class="chart-card card">
            <div class="chart-header">
                <h3>
                    <i class="fas fa-hashtag"></i>
                    Top Tags
                </h3>
                <p>Your most frequent themes</p>
            </div>
            <div class="tags-cloud">
                {% for tag, count in insights.top_tags %}
                    <span class="tag-item" style="font-size: {{ 1 + (count * 0.3) }}rem;">
                        #{{ tag }}
                        <span class="tag-count">{{ count }}</span>
                    </span>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- AI Insights (Mock) -->
    <div class="ai-insights">
        <div class="insight-card card">
            <div class="insight-header">
                <h3>
                    <i class="fas fa-robot"></i>
                    AI Insights
                </h3>
                <p>Powered by Baddie AI ✨</p>
            </div>
            <div class="insight-content">
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-trending-up"></i>
                    </div>
                    <div class="insight-text">
                        <h4>Positive Growth Trend</h4>
                        <p>Your mood scores have improved by 15% over the past month. You're clearly implementing effective self-care strategies!</p>
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="insight-text">
                        <h4>Peak Productivity Pattern</h4>
                        <p>You write most effectively on Tuesday and Thursday mornings. Consider scheduling important reflection time during these periods.</p>
                    </div>
                </div>
                
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-target"></i>
                    </div>
                    <div class="insight-text">
                        <h4>Goal Achievement Focus</h4>
                        <p>You frequently mention "success" and "goals" - your determination is clearly a driving force in your journey.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recommendations -->
    <div class="recommendations">
        <div class="chart-card card">
            <div class="chart-header">
                <h3>
                    <i class="fas fa-magic"></i>
                    Personalized Recommendations
                </h3>
                <p>Level up your journaling game</p>
            </div>
            <div class="recommendations-list">
                <div class="recommendation-item">
                    <div class="rec-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="rec-content">
                        <h4>Consistency Boost</h4>
                        <p>Try setting a daily reminder for 8 PM to maintain your amazing streak!</p>
                        <button class="btn btn-secondary btn-sm">
                            <i class="fas fa-bell"></i>
                            Set Reminder
                        </button>
                    </div>
                </div>
                
                <div class="recommendation-item">
                    <div class="rec-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="rec-content">
                        <h4>Gratitude Practice</h4>
                        <p>Add a daily gratitude section to boost your already positive mood patterns.</p>
                        <button class="btn btn-secondary btn-sm">
                            <i class="fas fa-plus"></i>
                            Try Template
                        </button>
                    </div>
                </div>
                
                <div class="recommendation-item">
                    <div class="rec-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="rec-content">
                        <h4>Export Your Data</h4>
                        <p>Download your journal entries and insights for deeper analysis or backup.</p>
                        <button class="btn btn-primary btn-sm">
                            <i class="fas fa-download"></i>
                            Export CSV
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
/* Insights Page Styles */
.insights-section {
    max-width: 1200px;
    margin: 0 auto;
}

.page-header {
    text-align: center;
    margin-bottom: var(--spacing-xl);
}

.page-header h1 {
    font-family: var(--font-primary);
    font-size: 3rem;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--spacing-sm);
}

.page-header p {
    font-size: 1.2rem;
    color: var(--text-secondary);
}

.overview-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.stat-card {
    padding: var(--spacing-lg);
    text-align: center;
    position: relative;
    overflow: hidden;
}

.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--gradient-primary);
}

.stat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-md);
}

.stat-header h3 {
    font-size: 1rem;
    color: var(--text-secondary);
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-header i {
    font-size: 1.5rem;
    color: var(--primary-pink);
}

.stat-value {
    font-family: var(--font-primary);
    font-size: 3rem;
    font-weight: 900;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
    line-height: 1;
}

.stat-trend {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    font-size: 0.9rem;
    font-weight: 600;
}

.stat-trend.positive {
    color: var(--primary-pink);
}

.charts-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-lg);
    margin-bottom: var(--spacing-xl);
}

.chart-card {
    padding: var(--spacing-lg);
}

.chart-header {
    margin-bottom: var(--spacing-lg);
    text-align: center;
}

.chart-header h3 {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
}

.chart-header p {
    color: var(--text-light);
    margin: 0;
    font-size: 0.9rem;
}

.mood-chart {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.mood-item {
    display: grid;
    grid-template-columns: 1fr 2fr auto;
    gap: var(--spacing-sm);
    align-items: center;
}

.mood-info {
    display: flex;
    flex-direction: column;
}

.mood-name {
    font-weight: 600;
    color: var(--text-primary);
}

.mood-count {
    font-size: 0.8rem;
    color: var(--text-light);
}

.mood-bar {
    background: var(--bg-overlay);
    border-radius: var(--radius-sm);
    height: 8px;
    overflow: hidden;
}

.mood-fill {
    height: 100%;
    border-radius: var(--radius-sm);
    transition: width 0.5s ease;
}

.mood-happy {
    background: linear-gradient(135deg, #FFD700, #FFA500);
}

.mood-focused {
    background: linear-gradient(135deg, #87CEEB, #4682B4);
}

.mood-contemplative {
    background: linear-gradient(135deg, #DDA0DD, #9370DB);
}

.mood-percentage {
    font-weight: 600;
    color: var(--primary-pink);
    font-size: 0.9rem;
    min-width: 40px;
    text-align: right;
}

.category-chart {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
}

.category-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-sm);
    background: var(--bg-overlay);
    border-radius: var(--radius-sm);
}

.category-icon {
    width: 40px;
    height: 40px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
}

.category-info {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.category-name {
    font-weight: 600;
    color: var(--text-primary);
}

.category-count {
    font-size: 0.8rem;
    color: var(--text-light);
}

.category-percentage {
    font-weight: 600;
    color: var(--primary-pink);
    font-size: 1.1rem;
}

.tags-section {
    margin-bottom: var(--spacing-xl);
}

.tags-cloud {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    justify-content: center;
    align-items: center;
    padding: var(--spacing-lg);
}

.tag-item {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    background: var(--bg-overlay);
    color: var(--primary-pink);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-lg);
    font-weight: 600;
    transition: all 0.3s ease;
    cursor: pointer;
}

.tag-item:hover {
    background: var(--primary-pink);
    color: white;
    transform: translateY(-2px);
}

.tag-count {
    background: rgba(255, 255, 255, 0.3);
    padding: 0.2rem 0.5rem;
    border-radius: var(--radius-sm);
    font-size: 0.8rem;
}

.ai-insights {
    margin-bottom: var(--spacing-xl);
}

.insight-card {
    padding: var(--spacing-xl);
    background: var(--gradient-secondary);
}

.insight-header {
    text-align: center;
    margin-bottom: var(--spacing-lg);
}

.insight-header h3 {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    color: var(--text-primary);
    font-size: 1.5rem;
    margin-bottom: var(--spacing-xs);
}

.insight-content {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.insight-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: flex-start;
}

.insight-icon {
    width: 50px;
    height: 50px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
    flex-shrink: 0;
}

.insight-text h4 {
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
    font-size: 1.1rem;
}

.insight-text p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin: 0;
}

.recommendations {
    margin-bottom: var(--spacing-xl);
}

.recommendations-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-lg);
}

.recommendation-item {
    display: flex;
    gap: var(--spacing-md);
    align-items: center;
    padding: var(--spacing-lg);
    background: var(--bg-overlay);
    border-radius: var(--radius-md);
    border: 1px solid var(--light-pink);
}

.rec-icon {
    width: 50px;
    height: 50px;
    background: var(--gradient-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.3rem;
    flex-shrink: 0;
}

.rec-content {
    flex: 1;
}

.rec-content h4 {
    color: var(--text-primary);
    margin-bottom: var(--spacing-xs);
    font-size: 1.1rem;
}

.rec-content p {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
}

.btn-sm {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
}

@media (max-width: 768px) {
    .charts-row {
        grid-template-columns: 1fr;
    }
    
    .overview-stats {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .page-header h1 {
        font-size: 2.5rem;
    }
    
    .mood-item {
        grid-template-columns: 1fr;
        gap: var(--spacing-xs);
        text-align: center;
    }
    
    .category-item {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-sm);
    }
    
    .recommendation-item {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-sm);
    }
    
    .insight-item {
        flex-direction: column;
        text-align: center;
        gap: var(--spacing-sm);
    }
}

@media (max-width: 480px) {
    .overview-stats {
        grid-template-columns: 1fr;
    }
    
    .tags-cloud {
        flex-direction: column;
        align-items: stretch;
    }
    
    .tag-item {
        justify-content: center;
    }
}
</style>
{% endblock %}